<div style='margin-top: 5rem' class="container">

<h2><%= @booking.listing.name %></strong></h2>
<p>Booking dates: <%= @booking.start_date.strftime("%A, %b %d") %> to <%= @booking.end_date.strftime("%A, %b %d") %></p>

<div class="shadow listing-card p-4">
  <div class="card-booking">
    <div class="cards mt-5">
      <p><strong>Status: </strong><%= "#{@booking.status}" %></p>
      <p><strong>Location: </strong><%= "#{@booking.listing.location}" %></p>
      <p><strong>Craft Type: </strong><%= "#{@booking.listing.craft_type}" %></p>
      <p><strong>Rented by: </strong><%= "#{@booking.user.name}" %></p>
      <p><strong>Price: </strong>Â£<%= "#{@booking.listing.price_per_day} / day" %></p>
    </div>
  </div>

  <div class="cards-show">
    <div class="card-category" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= cl_image_path @booking.listing.photo.key, height: 300, crop: :fill %>')">
    </div>

    <div id="map" class="box-shadow"
      style="width: 100%; height: 230px;"
      data-markers="<%= @marker.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>

  <div class="booking-footer">
  <% if @owner == true %>
      <p><%= link_to "Edit Booking", edit_booking_path(@booking), class: "btn btn-primary m-2" %></p>
  <% end %>
      <p><%= link_to "Cancel Booking", booking_path(@booking), method: :delete, class: "btn btn-primary" %></p>
      <p><%= link_to "back", profile_path(@booking.user), class: "btn btn-primary" %></p>
  </div>
</div>

<% if @booking.status == "Pending" %>
  <div class="flash flash-warning alert alert-dismissible fade show" role="alert">
    <span><strong>Aye matey!</strong> your booking status for <%= @booking.listing.name %> is pending!</span>
    <a data-dismiss="alert" aria-label="Close">
      <i class="fas fa-times"></i>
    </a>
  </div>
  <% elsif @booking.status == "Approved" %>
    <div class="flash flash-success alert alert-dismissible fade show" role="alert">
    <span><strong>Aye matey!</strong> your booking status for <%= @booking.listing.name %> has been approved!</span>
    <a data-dismiss="alert" aria-label="Close">
      <i class="fas fa-times"></i>
    </a>
  </div>
  <% else %>
    <div class="flash flash-danger alert alert-dismissible fade show" role="alert">
    <span><strong>Aye matey!</strong> your booking status for <%= @booking.listing.name %> has been cancelled!</span>
    <a data-dismiss="alert" aria-label="Close">
      <i class="fas fa-times"></i>
    </a>
<% end %>

</div>

